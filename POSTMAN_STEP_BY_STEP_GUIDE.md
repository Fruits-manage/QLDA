# H∆∞·ªõng d·∫´n t·ª´ng b∆∞·ªõc t·∫°o Customer, Warehouse, News trong Postman

## üìã M·ª•c l·ª•c
1. [Thi·∫øt l·∫≠p Postman](#thi·∫øt-l·∫≠p-postman)
2. [T·∫°o Customer (Kh√°ch h√†ng)](#t·∫°o-customer-kh√°ch-h√†ng)
3. [T·∫°o Warehouse (Kho h√†ng)](#t·∫°o-warehouse-kho-h√†ng)
4. [T·∫°o News (Tin t·ª©c)](#t·∫°o-news-tin-t·ª©c)
5. [Ki·ªÉm tra k·∫øt qu·∫£](#ki·ªÉm-tra-k·∫øt-qu·∫£)
6. [X·ª≠ l√Ω l·ªói th∆∞·ªùng g·∫∑p](#x·ª≠-l√Ω-l·ªói-th∆∞·ªùng-g·∫∑p)

---

## 1. Thi·∫øt l·∫≠p Postman

### B∆∞·ªõc 1: M·ªü Postman
- Kh·ªüi ƒë·ªông ·ª©ng d·ª•ng Postman tr√™n m√°y t√≠nh
- T·∫°o m·ªôt Collection m·ªõi t√™n "Django API Tests"

### B∆∞·ªõc 2: Thi·∫øt l·∫≠p Environment (T√πy ch·ªçn)
- V√†o Settings > Environment
- T·∫°o environment m·ªõi: "Local Django"
- Th√™m bi·∫øn: `base_url` = `http://127.0.0.1:8000`

### B∆∞·ªõc 3: ƒê·∫£m b·∫£o Django server ƒëang ch·∫°y
```bash
cd d:\IT\summer-2\QLDA
python manage.py runserver
```

---

## 2. T·∫°o Customer (Kh√°ch h√†ng)

### üéØ B∆∞·ªõc 1: T·∫°o request m·ªõi trong Postman

1. **Click "New Request"** trong Collection "Django API Tests"
2. **ƒê·∫∑t t√™n**: "Create Customer"
3. **Ch·ªçn method**: `POST`
4. **URL**: `http://127.0.0.1:8000/companies/api/create/`

### üéØ B∆∞·ªõc 2: Thi·∫øt l·∫≠p Headers

Trong tab **Headers**, th√™m:
```
Key: Content-Type    | Value: application/json
Key: Accept          | Value: application/json
```

### üéØ B∆∞·ªõc 3: Chu·∫©n b·ªã d·ªØ li·ªáu Body

Ch·ªçn tab **Body** > **raw** > **JSON**, sau ƒë√≥ d√°n n·ªôi dung:

```json
{
    "name": "C√¥ng ty TNHH Tr√°i C√¢y S·∫°ch Vi·ªát Nam",
    "company_type": "customer",
    "tax_code": "0123456789",
    "address": "123 ƒê∆∞·ªùng L√™ VƒÉn Vi·ªát, Qu·∫≠n 9, TP.HCM",
    "phone": "028-12345678",
    "email": "info@traicaysach.vn",
    "website": "https://traicaysach.vn",
    "contact_person": "Nguy·ªÖn VƒÉn An",
    "contact_phone": "0987654321",
    "contact_email": "nguyen.an@traicaysach.vn",
    "bank_name": "Ng√¢n h√†ng TMCP √Å Ch√¢u (ACB)",
    "bank_account": "1234567890",
    "import_license": "",
    "export_license": "XK-2024-001",
    "is_active": true
}
```

### üéØ B∆∞·ªõc 4: G·ª≠i request

1. **Click "Send"**
2. **Ki·ªÉm tra Status**: Ph·∫£i l√† `200 OK`
3. **Xem Response**:

```json
{
    "success": true,
    "message": "T·∫°o c√¥ng ty th√†nh c√¥ng",
    "data": {
        "id": 1,
        "name": "C√¥ng ty TNHH Tr√°i C√¢y S·∫°ch Vi·ªát Nam",
        "company_type": "customer",
        "tax_code": "0123456789",
        "address": "123 ƒê∆∞·ªùng L√™ VƒÉn Vi·ªát, Qu·∫≠n 9, TP.HCM",
        "phone": "028-12345678",
        "email": "info@traicaysach.vn",
        "website": "https://traicaysach.vn",
        "contact_person": "Nguy·ªÖn VƒÉn An",
        "contact_phone": "0987654321",
        "contact_email": "nguyen.an@traicaysach.vn",
        "bank_name": "Ng√¢n h√†ng TMCP √Å Ch√¢u (ACB)",
        "bank_account": "1234567890",
        "import_license": "",
        "export_license": "XK-2024-001",
        "is_active": true,
        "created_at": "2024-08-09T14:30:00.000Z",
        "updated_at": "2024-08-09T14:30:00.000Z"
    }
}
```

### üéØ B∆∞·ªõc 5: L∆∞u Customer ID

**Quan tr·ªçng**: Ghi nh·ªõ `id` t·ª´ response (v√≠ d·ª•: `1`) ƒë·ªÉ s·ª≠ d·ª•ng cho c√°c API kh√°c.

---

## 3. T·∫°o Warehouse (Kho h√†ng)

### üéØ B∆∞·ªõc 1: T·∫°o request m·ªõi

1. **Click "New Request"** 
2. **ƒê·∫∑t t√™n**: "Create Warehouse"
3. **Method**: `POST`
4. **URL**: `http://127.0.0.1:8000/inventory/api/warehouses/create/`

### üéØ B∆∞·ªõc 2: Thi·∫øt l·∫≠p Headers

```
Key: Content-Type    | Value: application/json
Key: Accept          | Value: application/json
```

### üéØ B∆∞·ªõc 3: Chu·∫©n b·ªã Body

```json
{
    "name": "Kho L·∫°nh Tr√°i C√¢y Qu·∫≠n 7",
    "code": "WH-Q7-001",
    "address": "789 ƒê∆∞·ªùng Nguy·ªÖn Th·ªã Th·∫≠p, Qu·∫≠n 7, TP.HCM",
    "manager_id": null,
    "capacity": 500.75,
    "is_active": true
}
```

**L∆∞u √Ω v·ªÅ c√°c tr∆∞·ªùng:**
- `name`: T√™n kho (b·∫Øt bu·ªôc, kh√¥ng tr√πng)
- `code`: M√£ kho (b·∫Øt bu·ªôc, kh√¥ng tr√πng)
- `address`: ƒê·ªãa ch·ªâ kho (b·∫Øt bu·ªôc)
- `manager_id`: ID ng∆∞·ªùi qu·∫£n l√Ω (c√≥ th·ªÉ null)
- `capacity`: S·ª©c ch·ª©a t√≠nh b·∫±ng t·∫•n (b·∫Øt bu·ªôc)
- `is_active`: Tr·∫°ng th√°i ho·∫°t ƒë·ªông (m·∫∑c ƒë·ªãnh true)

### üéØ B∆∞·ªõc 4: G·ª≠i request

**Click "Send"** v√† ki·ªÉm tra response:

```json
{
    "success": true,
    "message": "T·∫°o kho th√†nh c√¥ng",
    "data": {
        "id": 1,
        "name": "Kho L·∫°nh Tr√°i C√¢y Qu·∫≠n 7",
        "code": "WH-Q7-001",
        "address": "789 ƒê∆∞·ªùng Nguy·ªÖn Th·ªã Th·∫≠p, Qu·∫≠n 7, TP.HCM",
        "manager_id": null,
        "manager_name": null,
        "capacity": 500.75,
        "is_active": true,
        "created_at": "2024-08-09T14:35:00.000Z"
    }
}
```

---

## 4. T·∫°o News (Tin t·ª©c)

### üéØ B∆∞·ªõc 1: T·∫°o danh m·ª•c tin t·ª©c tr∆∞·ªõc (n·∫øu c·∫ßn)

Ki·ªÉm tra danh m·ª•c c√≥ s·∫µn:
- **Method**: `GET`
- **URL**: `http://127.0.0.1:8000/news/api/categories/`

### üéØ B∆∞·ªõc 2: T·∫°o request tin t·ª©c

1. **T·∫°o request m·ªõi**: "Create News"
2. **Method**: `POST`
3. **URL**: `http://127.0.0.1:8000/news/api/create/`

### üéØ B∆∞·ªõc 3: Headers

```
Key: Content-Type    | Value: application/json
Key: Accept          | Value: application/json
```

### üéØ B∆∞·ªõc 4: Body - Tin t·ª©c th√¥ng th∆∞·ªùng

```json
{
    "title": "Gi√° tr√°i c√¢y xu·∫•t kh·∫©u tƒÉng m·∫°nh trong th√°ng 8",
    "summary": "Th·ªã tr∆∞·ªùng tr√°i c√¢y xu·∫•t kh·∫©u ghi nh·∫≠n m·ª©c tƒÉng tr∆∞·ªüng ·∫•n t∆∞·ª£ng 25% so v·ªõi c√πng k·ª≥ nƒÉm tr∆∞·ªõc, ƒë·∫∑c bi·ªát l√† thanh long v√† xo√†i.",
    "content": "<h2>T√¨nh h√¨nh th·ªã tr∆∞·ªùng</h2><p>Theo th·ªëng k√™ t·ª´ B·ªô N√¥ng nghi·ªáp v√† Ph√°t tri·ªÉn n√¥ng th√¥n, xu·∫•t kh·∫©u tr√°i c√¢y Vi·ªát Nam trong th√°ng 8/2025 ƒë·∫°t kim ng·∫°ch 800 tri·ªáu USD, tƒÉng 25% so v·ªõi c√πng k·ª≥ nƒÉm 2024.</p><h3>C√°c lo·∫°i tr√°i c√¢y ch·ªß l·ª±c:</h3><ul><li>Thanh long: 300 tri·ªáu USD (+30%)</li><li>Xo√†i: 200 tri·ªáu USD (+22%)</li><li>V·∫£i thi·ªÅu: 150 tri·ªáu USD (+18%)</li><li>B∆∞·ªüi: 100 tri·ªáu USD (+15%)</li></ul><p>Trung Qu·ªëc v·∫´n l√† th·ªã tr∆∞·ªùng nh·∫≠p kh·∫©u l·ªõn nh·∫•t v·ªõi 60% t·ªïng kim ng·∫°ch.</p>",
    "category_id": 1,
    "news_type": "market",
    "status": "published",
    "priority": "high",
    "expiry_date": null,
    "is_featured": true,
    "is_active": true
}
```

### üéØ B∆∞·ªõc 5: Body - Th√¥ng b√°o quy ƒë·ªãnh

```json
{
    "title": "Th√¥ng b√°o: Quy ƒë·ªãnh m·ªõi v·ªÅ ch·ª©ng nh·∫≠n xu·∫•t x·ª© tr√°i c√¢y",
    "summary": "T·ª´ ng√†y 15/8/2025, c√°c doanh nghi·ªáp xu·∫•t kh·∫©u tr√°i c√¢y c·∫ßn tu√¢n th·ªß quy ƒë·ªãnh m·ªõi v·ªÅ ch·ª©ng nh·∫≠n xu·∫•t x·ª© v√† truy xu·∫•t ngu·ªìn g·ªëc.",
    "content": "<div class='alert alert-warning'><strong>Th√¥ng b√°o quan tr·ªçng!</strong></div><h2>Quy ƒë·ªãnh m·ªõi c√≥ hi·ªáu l·ª±c t·ª´ 15/8/2025</h2><h3>C√°c y√™u c·∫ßu ch√≠nh:</h3><ol><li><strong>Ch·ª©ng nh·∫≠n xu·∫•t x·ª©:</strong> T·∫•t c·∫£ l√¥ h√†ng tr√°i c√¢y xu·∫•t kh·∫©u ph·∫£i c√≥ gi·∫•y ch·ª©ng nh·∫≠n xu·∫•t x·ª© t·ª´ c∆° quan c√≥ th·∫©m quy·ªÅn.</li><li><strong>M√£ truy xu·∫•t:</strong> M·ªói s·∫£n ph·∫©m ph·∫£i c√≥ m√£ QR code ƒë·ªÉ truy xu·∫•t ngu·ªìn g·ªëc.</li><li><strong>H·ªì s∆° v·ªá sinh:</strong> Cung c·∫•p ƒë·∫ßy ƒë·ªß h·ªì s∆° v·ªÅ quy tr√¨nh canh t√°c v√† b·∫£o qu·∫£n.</li></ol><h3>Th·ªß t·ª•c th·ª±c hi·ªán:</h3><p>Doanh nghi·ªáp c·∫ßn n·ªôp h·ªì s∆° t·∫°i Chi c·ª•c Tr·ªìng tr·ªçt v√† B·∫£o v·ªá th·ª±c v·∫≠t ƒë·ªãa ph∆∞∆°ng tr∆∞·ªõc 7 ng√†y xu·∫•t h√†ng.</p><p><strong>Li√™n h·ªá h·ªó tr·ª£:</strong> Hotline 1900-1234</p>",
    "category_id": 1,
    "news_type": "regulation",
    "status": "published",
    "priority": "urgent",
    "expiry_date": "2025-12-31",
    "is_featured": true,
    "is_active": true
}
```

### üéØ B∆∞·ªõc 6: Gi·∫£i th√≠ch c√°c tr∆∞·ªùng

**C√°c gi√° tr·ªã h·ª£p l·ªá:**

| Tr∆∞·ªùng | Gi√° tr·ªã h·ª£p l·ªá | M√¥ t·∫£ |
|--------|----------------|--------|
| `news_type` | `internal`, `industry`, `system`, `regulation`, `market` | Lo·∫°i tin t·ª©c |
| `status` | `draft`, `published`, `archived` | Tr·∫°ng th√°i |
| `priority` | `low`, `normal`, `high`, `urgent` | ƒê·ªô ∆∞u ti√™n |

### üéØ B∆∞·ªõc 7: G·ª≠i request

**Response th√†nh c√¥ng:**

```json
{
    "success": true,
    "message": "T·∫°o tin t·ª©c th√†nh c√¥ng",
    "data": {
        "id": 1,
        "title": "Gi√° tr√°i c√¢y xu·∫•t kh·∫©u tƒÉng m·∫°nh trong th√°ng 8",
        "slug": "gia-trai-cay-xuat-khau-tang-manh-trong-thang-8",
        "summary": "Th·ªã tr∆∞·ªùng tr√°i c√¢y xu·∫•t kh·∫©u ghi nh·∫≠n m·ª©c tƒÉng tr∆∞·ªüng ·∫•n t∆∞·ª£ng...",
        "content": "<h2>T√¨nh h√¨nh th·ªã tr∆∞·ªùng</h2>...",
        "category_id": 1,
        "category_name": "Th·ªã tr∆∞·ªùng",
        "news_type": "market",
        "status": "published",
        "priority": "high",
        "author_id": 1,
        "author_name": "Admin User",
        "publish_date": "2024-08-09T14:40:00.000Z",
        "expiry_date": null,
        "is_featured": true,
        "is_active": true,
        "views_count": 0,
        "created_at": "2024-08-09T14:40:00.000Z",
        "updated_at": "2024-08-09T14:40:00.000Z"
    }
}
```

---

## 5. Ki·ªÉm tra k·∫øt qu·∫£

### üîç Ki·ªÉm tra Customer ƒë√£ t·∫°o

**Request**: `GET http://127.0.0.1:8000/companies/api/list/?type=customer`

### üîç Ki·ªÉm tra Warehouse ƒë√£ t·∫°o

**Request**: `GET http://127.0.0.1:8000/inventory/api/warehouses/list/`

### üîç Ki·ªÉm tra News ƒë√£ t·∫°o

**Request**: `GET http://127.0.0.1:8000/news/api/list/?status=published`

### üîç Xem chi ti·∫øt t·ª´ng ƒë·ªëi t∆∞·ª£ng

- Customer: `GET http://127.0.0.1:8000/companies/api/{id}/`
- Warehouse: `GET http://127.0.0.1:8000/inventory/api/warehouses/{id}/`
- News: `GET http://127.0.0.1:8000/news/api/{id}/`

---

## 6. X·ª≠ l√Ω l·ªói th∆∞·ªùng g·∫∑p

### ‚ùå L·ªói 400 - Bad Request

**L·ªói thi·∫øu tr∆∞·ªùng b·∫Øt bu·ªôc:**
```json
{
    "success": false,
    "error": "Tr∆∞·ªùng name l√† b·∫Øt bu·ªôc"
}
```
**Gi·∫£i ph√°p**: Ki·ªÉm tra l·∫°i t·∫•t c·∫£ c√°c tr∆∞·ªùng c√≥ d·∫•u `*` (b·∫Øt bu·ªôc)

**L·ªói tr√πng l·∫∑p:**
```json
{
    "success": false,
    "error": "M√£ s·ªë thu·∫ø ƒë√£ t·ªìn t·∫°i"
}
```
**Gi·∫£i ph√°p**: Thay ƒë·ªïi gi√° tr·ªã `tax_code` ho·∫∑c `code`

### ‚ùå L·ªói 404 - Not Found

**L·ªói category kh√¥ng t·ªìn t·∫°i:**
```json
{
    "success": false,
    "error": "Danh m·ª•c tin t·ª©c kh√¥ng t·ªìn t·∫°i"
}
```
**Gi·∫£i ph√°p**: 
1. Ki·ªÉm tra `category_id` c√≥ ƒë√∫ng kh√¥ng
2. T·∫°o category tr∆∞·ªõc b·∫±ng Django Admin

### ‚ùå L·ªói 500 - Server Error

**L·ªói k·∫øt n·ªëi database:**
```json
{
    "success": false,
    "error": "L·ªói server: Database connection failed"
}
```
**Gi·∫£i ph√°p**: 
1. Ki·ªÉm tra Django server c√≥ ƒëang ch·∫°y
2. Ki·ªÉm tra database connection
3. Xem log server ƒë·ªÉ bi·∫øt chi ti·∫øt

### üîß C√°c b∆∞·ªõc debug

1. **Ki·ªÉm tra URL**: ƒê·∫£m b·∫£o ƒë√∫ng endpoint
2. **Ki·ªÉm tra Headers**: Content-Type ph·∫£i l√† application/json
3. **Validate JSON**: S·ª≠ d·ª•ng JSON validator ƒë·ªÉ ki·ªÉm tra syntax
4. **Ki·ªÉm tra server logs**: Xem terminal Django ƒë·ªÉ bi·∫øt l·ªói chi ti·∫øt
5. **Test v·ªõi cURL**: Th·ª≠ v·ªõi cURL ƒë·ªÉ lo·∫°i tr·ª´ l·ªói t·ª´ Postman

---

## üìñ T√†i li·ªáu tham kh·∫£o nhanh

### Customer Fields (Required: *)
- `name*`: T√™n c√¥ng ty
- `company_type*`: customer, supplier, partner, our_company
- `tax_code*`: M√£ s·ªë thu·∫ø (unique)
- `address*`: ƒê·ªãa ch·ªâ

### Warehouse Fields (Required: *)
- `name*`: T√™n kho (unique)
- `code*`: M√£ kho (unique)
- `address*`: ƒê·ªãa ch·ªâ
- `capacity*`: S·ª©c ch·ª©a (s·ªë th·ª±c)

### News Fields (Required: *)
- `title*`: Ti√™u ƒë·ªÅ
- `summary*`: T√≥m t·∫Øt
- `content*`: N·ªôi dung HTML
- `category_id*`: ID danh m·ª•c
- `news_type*`: internal, industry, system, regulation, market

**Ch√∫c b·∫°n th√†nh c√¥ng v·ªõi vi·ªác test API!** üéâ
